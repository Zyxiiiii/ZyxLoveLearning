# 安装CentOS（略）

* `CentOS`
* `VMware`
* <font style="color:gray">`VMware Tools`</font>
  * 共享文件夹

# Linux目录结构

`Linux`的目录结构是树状的，有且只有一个根目录。

* <font style="color:red;font-weight:bolder">Linux中，一切皆为文件</font>

## Linux的根目录（"/"）

不同于`windows`，`Linux`只有一个根，那就是"/"，根下面有许多子目录（例如`usr`,`root`,`bin`等等），它是Linux系统下的顶级目录

## bin

* **`Binary`**，存放Linux的常用命令

## sbin

* **`Super User`**，存放系统管理员使用的应用程序

## home

* **存放普通用户的主目录**，在Linux中，每一个用户都有一个自己的目录，一般这个目录会以该用户的账号命名

## root

* **系统管理员的主目录**

## lib

* **系统启动所需的动态连接共享库**，几乎所有的应用程序都需要用到这个库

## lost+found

* 一般为空，当系统非法关机时，这里就会自动存放一些文件

## etc

* **所有的系统管理所需要的配置文件**和子目录（环境变量的配置）

## usr

* **用户的应用程序和文件都在这个目录下**

## boot

* 启动Linux时使用的一些核心文件，包括连接文件和镜像文件

## proc

* 这是一个虚拟目录，它是系统内存的映射，访问这个目录获取系统信息

## srv

* **`service`**目录，该目录存放一些服务启动后需要提取的数据

## sys

* Linux内核2.6以后新增的文件系统

<font style="color:red;font-weight:bolder">`proc`,`srv`,`sys`这三个目录涉及到Linux的内核，一般不允许轻易改动它们</font>

## tmp

* 用于存放一些临时文件

## dev

* **硬件目录**，类似于设备管理器，Linux把所有的硬件映射成文件，存储到这个目录下

## media

* **Linux识别到的U盘或光驱等媒体**，Linux会把这些设备挂载到这个目录下

## mnt

* **允许用户挂载别的文件系统的目录**，例如`VMware`的共享文件夹

## opt

* **给Linux额外安装软件存放的目录**，如`MySQL`、`Oracle`数据库

## usr/local

* **另一个给主机额外安装软件所安装的目录**，一般是通过编译源码安装的程序

## var

* **存放经常性被修改的文件**，例如日志

## selinux

**security-enhanced linux**

* `SELinux`是一种安全子系统，它能控制程序只能访问特定文件

# Linux的常用命令

* 对文件和目录的操作的一部分路径规则

  * `.`表示当前目录

  * `../`表示上级目录

  * `/`表示根目录

  * 路径的开头为`/`表示以根目录为起始

    路径的开头不为`/`表示以当前目录为起始

  * `*`表示配对一切文件及目录

## 关机重启

* `shutdown -h now/halt`：立即进行关机
* `shutdown -h 1`：1分钟后关机
* `shutdown -r now/reboot`：立即重启计算机
* `sync`：把内存的数据同步到磁盘

Tips：在关机或重启时，都应该先执行一次`sync`指令，把内存的数据写入到磁盘，防止数据丢失

## 帮助

* `man [命令或配置文件]`：获得帮助信息
* `help 命令`：获得shell内置命令的帮助信息

## 文件目录类

* `pwd`：显示当前工作目录的绝对路径

* `ls [选项] [目录或文件]`：查看当前目录的所有内容信息

  选项：

  * `-a`：显示当前目录所有的文件和目录，**包括隐藏的**
  * `-l`：以列表的方式显示信息

* `cd [参数]`：切换到指定目录

  常用参数：

  * 要定位到的**绝对路径**和**相对路径**
    * 绝对路径：从根目录开始定位的路径（`/home/zyx`）
    * 相对路径：从当前目录开始定位到需要的目录的路径（`../home/zyx`）
  * `cd ~/cd`：回到自己的**家目录**
  * `cd ..`：回到当前目录的上一级目录
  
* `mkdir [选项] 要创建的目录`：用于创建目录

  常用选项：

  * `-p`：创建多级目录

* `rmdir [选项] 要删除的目录`：删除**空**目录

  * `-rf`：删除非空目录
  
* `touch 文件名称`：创建一个空文件

* `cp [选项] 待拷贝文件 要拷贝到的目标目录`：拷贝文件到指定的目录

  常用选项：

  * `-r`：递归复制整个文件夹

  Tips：当有相同名字的文件时，Linux都会提示是否要覆盖，当我们确定要全部覆盖的时候，就可以使用`\cp`来强制执行覆盖，不再一个个文件提示

* `rm [选项] 要删除的文件或目录`：移除文件或目录

  常用选项：

  * `-r`：递归删除整个文件夹
  * `-f`：强制删除不提示

* `mv 原文件 新文件`：将文件或目录移动到对应的位置并重命名

  例：`mv /home/abc/oldFile /home/def/newFile`，这条指令则是把`/home/abc`中的`oldFile`移动到了`/home/def`下，并重命名为`newFile`

* `cat [选项] 要查看的文件`：查看文件内容

  常用选项：

  * `-n`：显示行号

  Tips：`cat`只能浏览文件，而不能修改文件，由于直接使用`cat`是将整个文件内容直接输出到控制台，这样很不便于我们浏览，所以，一般在使用`cat`的时候，会在最后加上`| more`（`|`名为管道命令符）

* `more 要查看的文件`：这是一个基于`vi`编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容

  `more`自带的快捷键：
  |   操作   |         功能说明         |
  | :------: | :----------------------: |
  | `Space`  |      向下翻**一页**      |
  | `Enter`  |      向下翻**一行**      |
  |   `q`    |      立即离开`more`      |
  | `Ctrl+F` |       向下滚动一屏       |
  | `Ctrl+B` |        返回上一屏        |
  |   `=`    |     输出当前行的行号     |
  |   `:f`   | 输出文件名和当前行的行号 |
  
* `less 要查看的文件`：功能与`more`类似，但却比`more`更为强大，它在显示文件内容时，**并不是一次将整个文件加载完毕后再显示，而是根据需要加载内容，提高了运行效率**，在显示大型文件时体现得更为明显

  `less`自带的快捷键：

  |     操作     |                    功能说明                    |
  | :----------: | :--------------------------------------------: |
  |   `Space`    |                  向下翻动一页                  |
  | `[pageDown]` |                  向下翻动一页                  |
  |  `[pageUp]`  |                  向上翻动一页                  |
  |   `/字串`    | 向下搜寻[字串]的功能：n：向下查找；N：向上查找 |
  |   `?字串`    | 向上搜寻[字串]的功能：n：向下查找；N：向上查找 |
  |     `q`      |                   离开`less`                   |

* `> 目标文件`：将显示的内容**重定向**到目标文件中

  例：

  * `ls -l > 文件x`：将`ls`列表的内容覆写到`文件x`中
  * `cat 文件1 > 文件2`：将`文件1`的内容覆写到`文件2`中

* `>> 目标文件`：将显示的内容**追加**到目标文件尾部

  例：

  * `ls -al >> 文件x`：将`ls`列表中的内容追加到`文件x`尾部
  * `echo "内容" >> 文件x`：将`"内容"`追加到`文件x`的尾部

* `echo [选项] 输出内容`：将输出内容输出到控制台

  Tips：这个输出内容可以直接写字符串，也可以通过写`$Path`输出环境变量这类内容

* `head [选项] 文件`：查看文件的开头部分内容，默认情况下显示文件的前10行内容

  常用选项：

  * `-n x`：输出文件的前`x`行内容（`x`为一个准确的数字）

* `tail [选项] 文件`：查看文件的结尾部分内容，默认情况下显示文件的后10行内容

  常用选项：

  * `-n x`：输出文件的后`x`行内容（`x`为一个准确的数字）
  * `-f`：实时追踪该文档的所有更新:star:

* `ln -s [原文件或目录] [软链接名]`：给`原文件或目录`创建一个软链接（软链接功能类似与`Windows`里的快捷方式，主要存放了链接其他文件的路径）

* `history [x]`：查看最近已经执行过的`x`条历史命令（如不输入`x`则默认全部输出），也可以执行历史命令

  Tips：可以通过`!x`来执行编号为`x`的指令（`x`为指令在历史记录中的编号）


## 时间日期类

* `date [选项]`：显示当前时间

  :star: `+`一定不能少

  常用选项：

  **显示当前时间：**（显示时间的格式前一定要用`+`连接）

  * `%Y`：显示当前年份
  * `%m`：显示当前月份
  * `%d`：显示当前是哪一天

  * `%H`：显示当前的时
  * `%M`：显示当前的分
  * `%S`：显示当前的秒

  Tips：若要一次性显示多个选项，需要用`""`括起来，例：`date "+%Y-%m-%d %H:%M:%S"`则显示**年月日时分秒**

  ---

  * `-s 字符串时间`：设置系统时间

* `cal [选项]`：查看日历，默认情况下查看本月日历

  常用选项：

  * `xxxx`：显示`xxxx`年的整年日历（`xxxx`为整年的年份）

## 搜索查找类

* `find [搜索范围] [选项] keyword`：从指定目录向下递归地遍历每个子目录，将满足条件的文件或目录显示在终端

  常用选项：

  * `-name`：按照指定的文件名查找模式查找文件（后跟具体的文件名）

    Tips：利用通配符`*`可以查询某一类型或名字相似的文件，如：`*.txt`可以查询文件后缀名为`txt`的文件

  * `-user`：查找属于指定用户名的所有文件（后跟用户的名称）

  * `-size`：按照指定的文件大小查找文件

    文件的大小有以下几种表达方式：
    
    * `-n`：小于`n`
    * `+n`：大于`n`
    * `n`：等于`n`
    
    Tips：另外在文件大小最后需要加计量的单位，如：`M`、`K`

* `locate 待搜索文件名`：`locate`指令能**更快速**的定位文件路径，快速地查询文件

  由于**`locate`事先在系统中建立了`locate`数据库，所以`locate`指令不需要遍历整个文件系统，因此查询速度较快**，但由于需要查询建立在`locate`数据库的数据之上，所以为了保证查询结果的准确性，`locate`指令需要**定期使用`updatedb`指令来更新`locate`数据库**

* `grep [选项] 查找内容 源文件`：过滤查找，用于查找文件内容中包含`查找内容`关键字

  常用选项

  * `-n`：显示匹配行及行号
  * `-i`：忽略字母大小写

* `|`：管道符号，表示将前一个命令的处理结果输出传递给后面的命令处理

  Tips：一般来说，`grep`指令和`|`管道符都是成对出现的，如：`cat hello.txt | grep -n yes`：查询`hello.txt`中包含yes的行并显示行号

## 压缩和解压缩

* `gzip 文件名`：将文件压缩为`*.gz`格式

* `gunzip 文件.gz`：解压缩文件

  Tips：以上两种压缩和解压方式都会清除源文件，无法保留原来的文件

----

* `zip [选项] xxx.zip 待压缩的内容`：把要`压缩的内容`压缩成`xxx.zip`

  常用选项：

  * `-r`：递归压缩，将目录里的所有内容都压缩成指定的格式

* `unzip [选项] xxx.zip`：解压缩`xxx.zip`文件

  常用选项：

  * `-d 解压后的目标目录`

---

* `tar [选项] xxx.tar.gz 打包的内容`：将`内容`**打包**，打包后的文件格式为`.tar.gz`

  常用选项：

  * `-c`：产生`.tar`打包文件
  * `-v`：显示详细信息
  * `-f`：指定压缩后的文件名
  * `-z`：打包同时压缩
  * `-x`：解包`.tar`文件

# 远程登录——Linux-Xshell5

* `Xshell5`介绍：`Xshell`是目前最好的远程登录到Linux操作的软件，流畅的速度并且完美解决了中文乱码的问题，是目前程序员首选的软件

  `Xshell`是一个强大的安全终端模拟软件，它支持`SSH1`、`SSH2`以及`Microsoft Windows`平台的`Telent`协议

  `Xshell`可以在`Windows`界面下用来访问远端不同系统下的服务器，从而比较好的达到远程控制终端的目的

* `Xshell5`的使用：

  * 首次使用需要新建**会话**
    * 名称：自定义
    * **协议：SSH**
    * 主机：需要远程登录的`Linux`主机的**`IP`地址**
    * **端口号：22**
  * 首次连接会话需要输入你在该`Linux`系统下的用户名和密码
  * 连接成功以后，就可以通过命令，远程操作`Linux`，这种操作方法相当于在操作机器本身

# 远程上传、下载文件——Linux-Xftp5

* `Xftp5`介绍：

  `Xftp5`是一款基于Windows平台的功能强大的`SFTP`、`FTP`文件传输软件，使用`Xftp5`能让`Windows`用户能安全地在`Unix/Linux`和`Windows PC`之间传输文件

* `Xftp5`的配置和使用

  * 首次使用同样需要新建会话

    * 名称：自定义
    * **协议：SFTP**
    * 主机：需要远程登录的`Linux`主机的**`IP`地址**
    * **端口号：22**
    * 用户名：在`Linux`上的对应用户名

  * 乱码问题

    在属性中将使用`UTF-8`编码勾选

# Linux中vi和vim编辑器的使用

* 所有的`Linux`系统都内置了**vi文本编辑器**
* **Vim**具有程序编辑的能力，可以看作是`Vi`的增强版本，可以主动的以字体颜色辨别语法的正确性，方便程序设计。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用

## vi 和 vim 的三种模式

* 正常模式

  以`vim`打开一个档案就直接进入一般模式了（这是默认的模式）。在这个模式中，你可以使用`↑↓←→`按键来移动光标，可以使用 *删除字符* 或 *删除整行* 来处理档案内容，也可以使用 *复制、黏贴* 来处理文件数据

* 插入模式

  在插入模式下，程序员可以输入内容

  按下`i、I、o、O、a、A、r、R`等任意一个字母后才会进入编辑模式，一般使用`i`即可

* 命令行模式

  在这个模式中，可以提供相关指令，完成**读取、存盘、替换、离开`vim`、显示行号**等操作

## vi 和 vim 的常用快捷键

* 拷贝当前行：`yy`；拷贝当前行向下的5行：`5yy`
* 粘贴：`p`
* 删除当前行：dd；删除当前行向下的5行：`5dd`
* 在文件中查找某个单词：命令行模式下，`/关键字`，回车查找，输入n就是查找下一个
* 设置文件的行号，取消文件的行号：命令行模式下，`:set nu`和`:set nonu`
* 编辑某个文件，使用快捷键到文档的最底行（`G`）和最首行（`gg`）
* 在文件中输入“hello”，然后又撤销这个动作：在正常模式下`u`
* 编辑某个文件，将光标移动到20行：`shift+g`

# 用户登录和注销

* 基本介绍
  * 在登陆时应当尽量少使用`root`账号，因为它是系统管理员，有最大的权限，避免操作失误，可以利用普通用户登录，登陆后再用`su - 用户名`命令来切换成系统管理员身份
  * 在提示符下输入`logout`即可注销用户
* 使用细节
  * `logout`注销指令在图形运行级别无效，在运行级别3下有效

# 用户管理

* `Linux`是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统
* `Linux`的用户至少属于一个**组**

## 基本语法

* 添加用户：`useradd [选项] 用户名`

  * 当创建用户成功后，会自动创建和用户同名的`home`目录 
  * 也可以通过`useradd -d 用户名`，给新用户指定家目录
  * 若创建用户时需要指定用户组，则可以使用`useradd -g 用户组名 用户名`

* 指定用户密码：`passwd 用户名`

* 删除用户：`userdel 用户名`

  * 在不带有任何参数时，默认删除用户，但保留家目录
  * 若要连同家目录一起删除，则需要使用`userdel -r 用户名`

  **Tips：一般来说，即使用户被删除，我们都会保留用户的家目录**

* 查询用户：`id 用户名`

  * `uid`：用户的`id`
  * `gid`：用户所在组的`id`
  * 组：用户所在组的名称
  * 若不存在该用户，则会返回“无此用户”

* 切换用户：`su - 用户名`

  * 从权限高的用户切换到权限低的用户时，不需要输入密码，反之则需要
  * 使用`exit`可以回退到原先的用户
  * 使用`whoami/who am i`指令可以查询当前自己是哪个用户

* 修改用户的组：`usermod -g 新的用户组 用户名`

### 用户信息的相关文件

* 用户配置文件：`/etc/passwd`

  用户（user）的配置文件，记录用户的各种信息

  每行的含义：`用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录shell`

* 口令配置文件（密码和登录信息，是加密的）：`/etc/shadow`

  每行的含义：`登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志`

## 用户组

* 类似于角色，系统可以队有共性的多个用户进行统一的管理

### 基本语法

* 新增组：`groupadd 组名`
* 删除组：`groupdel 组名`

### 用户组的相关文件

* 组配置文件：`/etc/group`

  每行含义：`组名:口令:组标识号:组内用户列表`

# Linux的7个运行级别

* **系统的运行级别配置文件**：`/etc/inittab`，该文件指定系统的运行级别

  * `/etc/inittab`的`id:5:initdefault`中的数字指定了`Linux`的运行级别

* 运行级别

  0. 关机

  1. 单用户

     在此模式下`root`不需要密码，可以利用这个特性来找回密码

  2. 多用户无网络服务

  3. 多用户有网络服务

  4. 保留

  5. **图形界面**

  6. **重启**

* 指定运行级别：

  1. `init [0123456]`
  2. 另外，还可以在启动引导时通过修改内核配置来修改运行级别，*可以利用这个方法进入单用户模式，然后在单用户模式下修改`root`密码来打到找回`root`密码的目的*
  3. 修改`/etc/inittab`的`id:5:initdefault`中的数字指定`Linux`的运行级别

